(()=>{"use strict";var e={330:e=>{e.exports=JSON.parse('{"name":"findrjs","version":"1.0.0","description":"Findr for the browser","author":"Rémi Van Keisbelck <remi@rvkb.com>","license":"MIT","main":"dist/index.js","types":"dist/index.d.ts","scripts":{"prettify":"prettier --write src","tsc":"tsc","compile":"rimraf dist && tsc","watch":"tsc -w","test":"jest","lint":"eslint \'**/*.{js,ts}\'","bundle":"webpack","gh-pages":"gh-pages -d bundle -m \'publish to gh-pages [ci skip]\'"},"devDependencies":{"@types/jest":"^29.5.13","eslint":"^9.12.0","gh-pages":"^6.2.0","jest":"^29.7.0","jest-environment-jsdom":"^29.7.0","prettier":"^3.3.3","rimraf":"^6.0.1","ts-jest":"^29.2.5","ts-loader":"^9.5.1","typescript":"^5.6.3","webpack":"^5.95.0","webpack-cli":"^5.1.4"}}')}},t={};class s{}class n extends s{constructor(e){super(),this.selector=e}execute(e){return e.querySelector(this.selector)}describe(){return this.selector}}const r=new class{constructor(){this.enabled=!1}info(e){this.enabled&&console.log(e)}warn(e){this.enabled&&console.log("%c"+e,"color: orange;")}success(e){this.enabled&&console.log("%c"+e,"color: green;")}error(e){this.enabled&&console.log("%c"+e,"color: red;")}};class i{static newInstance(e,t){return new i(e,t,-1,[])}constructor(e,t,s,n){this.findr=e,this.selector=t,this._count=s,this.whereItems=n}count(e){return new i(this.findr,this.selector,e,this.whereItems)}at(e){return new o((()=>{const t=this.evalSync();return null===t?(r.warn("> parent context returned null"),null):e>t.length-1?(r.warn("> at("+e+" out of bounds : "+t.length),null):(r.success("> at("+e+") found"),t[e])}),this.findr.getTimeout(),[])}where(e){return new i(this.findr,this.selector,this._count,[...this.whereItems,e])}expectOne(){return this.count(1).at(0)}evalSync(){const e=this.findr.evalSync();if(null===e)return r.warn("> parent context returned null"),null;const t=Array.from(e.querySelectorAll(this.selector)).filter((e=>{var t,s;for(let n of this.whereItems){if(!n(e))return r.warn("> failed : "+(null!==(t=n.description)&&void 0!==t?t:" (no description)")),!1;r.success("> ok : "+(null!==(s=n.description)&&void 0!==s?s:" (no description)"))}return!0}));return-1!==this._count&&this._count!==t.length?(r.warn("> failed : count("+this._count+"), was "+t.length),null):t}async eval(){return this.evalWithResult((e=>!0))}async evalWithResult(e){const t=(new Date).getTime();return r.info("eval starting at "+t),new Promise(((s,n)=>{const i=()=>{if((new Date).getTime()-t>this.findr.getTimeout())r.error("timed out"),n("timed out");else{const t=this.evalSync();if(null===t)r.warn("no elems, retrying eval..."),setTimeout(i,100);else{const n=e(t);null===n?(r.warn("callback returned null, retrying eval..."),setTimeout(i,100)):(r.success("eval success, resolving"),s(n))}}};i()}))}}class l extends s{constructor(e){super(),this.where=e}execute(e){return this.where(e)?e:null}describe(){var e;return"where : "+(null!==(e=this.where.description)&&void 0!==e?e:"no description available")}}class o{constructor(e,t,s){this.context=e,this.timeoutMs=t,this.items=s}static enableLogging(e){r.enabled=e}setTimeout(e){return new o(this.context,e,this.items)}getTimeout(){return this.timeoutMs}$(e){return new o(this.context,this.timeoutMs,[...this.items,new n(e)])}$$(e){return i.newInstance(this,e)}where(e){return new o(this.context,this.timeoutMs,[...this.items,new l(e)])}evalSync(){let e=this.context();if(null===e)return r.warn("> parent context returned null"),null;for(let t of this.items){if(e=t.execute(e),null===e){r.warn("> failed : "+t.describe());break}r.success("> ok : "+t.describe())}return e}async eval(){return this.evalWithResult((e=>!0))}async evalWithResult(e){const t=(new Date).getTime();return r.info("eval starting at "+t),new Promise(((s,n)=>{const i=()=>{if((new Date).getTime()-t>this.timeoutMs)r.error("timed out"),n("timed out");else{let t=this.context();if(null===t)r.warn("retrying eval..."),setTimeout(i,100);else{for(let e of this.items){if(t=e.execute(t),null===t){r.warn("> failed : "+e.describe());break}r.success("> ok : "+e.describe())}if(null===t)r.warn("no elem, retrying eval..."),setTimeout(i,100);else{const n=e(t);null===n?(r.warn("callback returned null, retrying eval..."),setTimeout(i,100)):(r.success("eval success, resolving"),s(n))}}}};i()}))}}o.ROOT=new o((()=>document.documentElement),5e3,[]);const c=o.ROOT,u=function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}(330);window.findr={root:c,$:c.$.bind(c),$$:c.$$.bind(c),enableLogging:o.enableLogging},console.log(`\n ┏┓•   ┓  \n ┣ ┓┏┓┏┫┏┓\n ┻ ┗┛┗┗┻┛  v${u.version}    \n lib loaded ! findr is available\n \n`)})();